import os
from telegram import InlineKeyboardButton, InlineKeyboardMarkup, Update
from telegram.ext import Updater, CommandHandler, CallbackQueryHandler, CallbackContext

TOKEN = os.getenv("STAR")
updater = Updater(token=TOKEN, use_context=True)
dispatcher = updater.dispatcher

def main_menu_kb():
    kb = [[InlineKeyboardButton("üé∞ –ò–ì–†–ê–¢–¨", callback_data="play"),
           InlineKeyboardButton("üë§ –ü–†–û–§–ò–õ–¨", callback_data="profile")]]
    return InlineKeyboardMarkup(kb)

def roulette_kb():
    kb = [[InlineKeyboardButton("üéüÔ∏è –°–ü–ò–ù", callback_data="spin"),
           InlineKeyboardButton("üîô –ù–∞–∑–∞–¥", callback_data="back_to_main")]]
    return InlineKeyboardMarkup(kb)

def result_kb():
    kb = [[InlineKeyboardButton("üîÑ –°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑", callback_data="spin"),
           InlineKeyboardButton("üîô –ù–∞–∑–∞–¥", callback_data="back_to_main")]]
    return InlineKeyboardMarkup(kb)

def start(update: Update, context: CallbackContext):
    name = update.effective_user.first_name or "–∏–≥—Ä–æ–∫"
    text = (
        f"‚ú® –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é\n\n"
        f"‚ú® –ü—Ä–∏–≤–µ—Ç, {name}! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ StarryCasino ‚Äî –∑–¥–µ—Å—å –≤—ã–∏–≥—Ä—ã—à–∏ –Ω–µ –∂–¥—É—Ç, –æ–Ω–∏ —Å–ª—É—á–∞—é—Ç—Å—è! ‚ú®\n\n"
        f"–ß—Ç–æ —Ç–µ–±—è –∂–¥—ë—Ç:\n\n"
        f"üéÅ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –±–æ–Ω—É—Å—ã ‚Äî –ø—Ä—è–º–æ –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç, –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫\n"
        f"üé∞ –†–æ–∑—ã–≥—Ä—ã—à–∏ –∏ –∏–≥—Ä—ã ‚Äî –∫–∞–∂–¥—ã–π —à–∞–Ω—Å –Ω–∞ –≤—ã–∏–≥—Ä—ã—à —Ä–µ–∞–ª—å–Ω–æ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–π\n"
        f"üì≤ –£–¥–æ–±–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä—è–º–æ –≤ Telegram: –±—ã—Å—Ç—Ä–æ, –ø—Ä–æ—Å—Ç–æ, –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ\n\n"
        f"–ó–¥–µ—Å—å –Ω–µ—Ç –ª–∏—à–Ω–µ–π —Å—É–µ—Ç—ã ‚Äî —Ç–æ–ª—å–∫–æ –∞–∑–∞—Ä—Ç, —Å—Ç–∏–ª—å –∏ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –æ—Ç –∏–≥—Ä—ã.\n"
        f"–ó–∞–ø—É—Å–∫–∞–µ–º —É–¥–∞—á—É! üåü"
    )
    update.message.reply_text(text, reply_markup=main_menu_kb())

def callback_handler(update: Update, context: CallbackContext):
    data = update.callback_query.data
    q = update.callback_query
    if data == "play":
        q.edit_message_text(
            "üé∞ –†–∞–∑–¥–µ–ª —Ä—É–ª–µ—Ç–∫–∞\n\n"
            "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ñ—Ä—É–∫—Ç–æ–≤—É—é —Ä—É–ª–µ—Ç–∫—É!\n"
            "–ò—Å–ø—ã—Ç–∞–π —Å–≤–æ—é —É–¥–∞—á—É –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–æ–±—Ä–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ —Å—Ä–µ–¥–Ω–µ–π —Å—Ç—Ä–æ–∫–µ.\n\n"
            "üí° –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã:\n"
            "‚Ä¢ 3 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Ñ—Ä—É–∫—Ç–∞ ‚Üí –≤—ã–∏–≥—Ä—ã—à √ó2\n"
            "‚Ä¢ 3 –∑–≤–µ–∑–¥—ã ‚≠ê ‚Üí –≤—ã–∏–≥—Ä—ã—à √ó3\n"
            "‚Ä¢ 3 —Å–µ–º—ë—Ä–∫–∏ 7Ô∏è‚É£ ‚Üí –¥–∂–µ–∫–ø–æ—Ç √ó5\n"
            "‚Ä¢ –õ—é–±–∞—è –Ω–µ–ø–æ–ª–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è ‚Üí –≤—ã–∏–≥—Ä—ã—à –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç",
            reply_markup=roulette_kb()
        )
    elif data == "spin":
        q.edit_message_text(
            "‚Ä¶–ë–ê–†–ê–ë–ê–ù–´ –ö–†–£–¢–Ø–¢–°–Ø‚Ä¶ üé∞\n\n"
            "| ‚≠ê | ‚≠ê | ‚≠ê |\n\n"
            "üéâ –û—Ç–ª–∏—á–Ω–æ! –í—ã —Å–æ–±—Ä–∞–ª–∏ —Ç—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–∞!\n"
            "‚ú® –í–∞—à–∞ —Å—Ç–∞–≤–∫–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è!\n"
            "üí∞ –í–∞—à –±–∞–ª–∞–Ω—Å: 1234 –º–æ–Ω–µ—Ç\n"
            "–ù–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ—Å—å ‚Äî —Å—ã–≥—Ä–∞–π—Ç–µ –µ—â—ë —Ä–∞–∑ –∏ –ª–æ–≤–∏—Ç–µ —É–¥–∞—á—É! üçÄ",
            reply_markup=result_kb()
        )
    elif data == "profile":
        uid = q.from_user.id
        q.edit_message_text(
            f"üë§ –ü—Ä–æ—Ñ–∏–ª—å\n\nüÜî –í–∞—à ID: {uid}\nüí∞ –í–∞—à —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: 0‚≠êÔ∏è\n\n"
            "–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ –±–∞–ª–∞–Ω—Å.\n"
            "–í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å –≤ –∏–≥—Ä—ã, –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –ª–æ–≤–∏—Ç–µ —É–¥–∞—á—É! ‚ú®üé∞",
            reply_markup=InlineKeyboardMarkup([[InlineKeyboardButton("üîô –ù–∞–∑–∞–¥", callback_data="back_to_main")]])
        )
    elif data == "back_to_main":
        name = q.from_user.first_name or "–∏–≥—Ä–æ–∫"
        q.edit_message_text(
            f"‚ú® –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é\n\n"
            f"‚ú® –ü—Ä–∏–≤–µ—Ç, {name}! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ StarryCasino ‚Äî –∑–¥–µ—Å—å –≤—ã–∏–≥—Ä—ã—à–∏ –Ω–µ –∂–¥—É—Ç, –æ–Ω–∏ —Å–ª—É—á–∞—é—Ç—Å—è! ‚ú®\n\n"
            f"–ß—Ç–æ —Ç–µ–±—è –∂–¥—ë—Ç:\n\n"
            f"üéÅ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –±–æ–Ω—É—Å—ã ‚Äî –ø—Ä—è–º–æ –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç, –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫\n"
            f"üé∞ –†–æ–∑—ã–≥—Ä—ã—à–∏ –∏ –∏–≥—Ä—ã ‚Äî –∫–∞–∂–¥—ã–π —à–∞–Ω—Å –Ω–∞ –≤—ã–∏–≥—Ä—ã—à —Ä–µ–∞–ª—å–Ω–æ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–π\n"
            f"üì≤ –£–¥–æ–±–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä—è–º–æ –≤ Telegram: –±—ã—Å—Ç—Ä–æ, –ø—Ä–æ—Å—Ç–æ, –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ\n\n"
            f"–ó–¥–µ—Å—å –Ω–µ—Ç –ª–∏—à–Ω–µ–π —Å—É–µ—Ç—ã ‚Äî —Ç–æ–ª—å–∫–æ –∞–∑–∞—Ä—Ç, —Å—Ç–∏–ª—å –∏ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –æ—Ç –∏–≥—Ä—ã.\n"
            f"–ó–∞–ø—É—Å–∫–∞–µ–º —É–¥–∞—á—É! üåü",
            reply_markup=main_menu_kb()
        )
    q.answer()

dispatcher.add_handler(CommandHandler("start", start))
dispatcher.add_handler(CallbackQueryHandler(callback_handler))

if __name__ == "__main__":
    updater.start_polling()
    updater.idle()
